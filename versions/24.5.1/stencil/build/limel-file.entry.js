import{r as t,c as i,h as s,g as e}from"./core-5f6fd4ec.js";import"./tslib.es6-1f0f644b.js";import"./component-d4db6478.js";import"./index-8af7e892.js";import"./index-d652537e.js";import"./component-235681bd.js";import{M as h}from"./index-1b7f7bf8.js";import{c as n}from"./random-string-60cd3186.js";const o={id:null,text:null,removable:!0,icon:"note",iconColor:"var(--lime-light-grey)"},l=class{constructor(s){t(this,s),this.required=!1,this.disabled=!1,this.fileInputId=n(),this.handleFileSelection=this.handleFileSelection.bind(this),this.handleFileChange=this.handleFileChange.bind(this),this.handleChipSetChange=this.handleChipSetChange.bind(this),this.handleFileDrop=this.handleFileDrop.bind(this),this.change=i(this,"change",7)}componentDidLoad(){this.fileInput=this.element.shadowRoot.getElementById(this.fileInputId),this.chipSet=this.element.shadowRoot.querySelector("limel-chip-set"),this.mdcTextField=new h(this.chipSet.shadowRoot.querySelector(".mdc-text-field"))}componentDidUnload(){this.mdcTextField&&this.mdcTextField.destroy()}render(){const t=this.value?[Object.assign(Object.assign({},o),{text:this.value.filename,id:this.value.id})]:[];return[s("input",{id:this.fileInputId,type:"file",onChange:this.handleFileChange,hidden:!0}),s("limel-chip-set",{disabled:this.disabled,label:this.label,required:this.required,type:"input",value:t,onFocus:this.handleFileSelection,onChange:this.handleChipSetChange,onInteract:this.preventAndStop,onDrop:this.handleFileDrop,onDragEnter:this.preventAndStop,onDragOver:this.preventAndStop})]}handleFileSelection(t){t.stopPropagation(),this.value||this.fileInput.click()}handleFileChange(t){this.fileInput.files.length>0&&(t.stopPropagation(),this.handleFile(this.fileInput.files[0]))}handleFile(t){const i={id:n(),filename:t.name,contentType:t.type,size:t.size,fileContent:t};this.change.emit(i),this.chipSet.blur(),this.mdcTextField.valid=!0}handleChipSetChange(t){t.stopPropagation();const i=t.detail.length?null:t.detail[0];this.chipSet.blur(),i||(this.fileInput.value="",this.change.emit(i),this.required&&(this.mdcTextField.valid=!1))}handleFileDrop(t){this.preventAndStop(t),this.handleFile(t.dataTransfer.files[0])}preventAndStop(t){t.stopPropagation(),t.preventDefault()}get element(){return e(this)}};export{l as limel_file};